<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <link rel="stylesheet" href="../css/index.css" />
  </head>
  <body>
    <header>
      <nav class="header__nav">
        <div>
          <a href="index.html" class="header__logo">
            <img src="../assets/title.svg" alt="" />
            <h4>PetShop</h4>
          </a>
        </div>
        <ul class="header__menu">
          <li><a href="index.html#proizvodi">Proizvodi</a></li>
          <li><a href="#admin__links">Admin</a></li>
          <li><a href="about-us.html">O nama</a></li>
          <li><a href="#" onclick="openForm()">Prijavite se</a></li>
        </ul>
        <div class="menu-cart">
          <ul class="header__menu-mobile">
            <li>
              <img src="../assets/menu.svg" alt="menu" class="hamburger" />
            </li>
          </ul>
          <div class="cart">
            <a href="cart.html"
              ><img src="../assets/shopping-cart-icon.png" alt="cart"
            /></a>
          </div>
        </div>
      </nav>
    </header>
    <section class="product" id="proizvod">
      <div class="product__left-side" id="leftSide"></div>
      <div class="product__right-side" id="rightSide"></div>
    </section>
    <footer class="footer">
      <div>
        <img src="../assets/title.svg" alt="" class="footer__img" />
      </div>
      <div>
        <h2>Linkovi</h2>
        <ul class="links">
          <li><a href="index.html#proizvodi">Proizvodi</a></li>
          <li><a href="#admin__links">Admin</a></li>
          <li><a href="about-us.html">O nama</a></li>
          <li><a href="#" onclick="openForm()">Prijavite se</a></li>
        </ul>
      </div>
      <div>
        <h2>Admin</h2>
        <ul class="links" id="admin__links">
          <li><a href="ListOfProducts.html">Proizvodi</a></li>

          <li><a href="listOfUsers.html">Korisnici</a></li>
        </ul>
      </div>
      <div>
        <h2>Zapratite nas</h2>
        <ul class="links social">
          <li>
            <a href="#">
              <img src="../assets/square-facebook.svg" alt="" /> Facebook</a
            >
          </li>
          <li>
            <a href="#"
              ><img src="../assets/square-instagram.svg" alt="" /> Instagram</a
            >
          </li>
          <li>
            <a href="#"
              ><img src="../assets/square-twitter.svg" alt="" /> Twitter</a
            >
          </li>
        </ul>
      </div>
    </footer>
    <div class="after__footer">
      <p>Made by FTN &copy;</p>
    </div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
        set,
        get,
        child,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
      const firebaseConfig = {
        apiKey: "AIzaSyDSN0vbu-NWOLwJJHpAbhanlns666rGgRk",
        authDomain: "petshop-200ae.firebaseapp.com",
        databaseURL: "https://petshop-200ae-default-rtdb.firebaseio.com",
        projectId: "petshop-200ae",
        storageBucket: "petshop-200ae.appspot.com",
        messagingSenderId: "332500787103",
        appId: "1:332500787103:web:4b5ba921b52d4bce9f27aa",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      const urlParams = new URLSearchParams(window.location.search);
      const proizvodKey = urlParams.get("key");

      const proizvodiRef = ref(
        db,
        "proizvodi" + "/-MNVEu6iMr2EFlQO6TW60/" + proizvodKey
      );

      onValue(proizvodiRef, (snapshot) => {
        const proizvod = snapshot.val();

        if (proizvod) {
          const leftSide = document.getElementById("leftSide");
          const rightSide = document.getElementById("rightSide");

          const imgTag = document.createElement("img");
          imgTag.alt = "Slika nije dostupna";
          imgTag.src = proizvod.slike[0];
          leftSide.appendChild(imgTag);

          const h1Tag = document.createElement("h1");
          h1Tag.textContent = proizvod.naziv;
          rightSide.appendChild(h1Tag);

          const cenaTag = document.createElement("p");
          cenaTag.classList.add("cena");
          cenaTag.textContent = `RSD ${proizvod.cena}`;
          rightSide.appendChild(cenaTag);

          const opisTag = document.createElement("p");
          opisTag.textContent = proizvod.detaljanOpis;
          rightSide.appendChild(opisTag);

          const buttonTag = document.createElement("button");
          buttonTag.textContent = "Dodaj u korpu";
          rightSide.appendChild(buttonTag);
        } else {
          console.error("Product not found");
        }
      });
    </script>
    <script src="../js/index.js"></script>
  </body>
</html>
